# 第7章：黃金分析流程與案例實戰

## 章節概述
本章節是課程的核心實戰章節，以「Cloudy Homework」專案為案例，完整演示PM的逆向工程分析流程。學員將學會系統性的四階段分析方法，並獲得實際操作經驗。

## 學習目標
完成本章節後，學員將能夠：
1. 掌握四階段黃金分析流程
2. 熟練使用「Cloudy Homework」案例進行實戰分析
3. 從程式碼中提煉商業洞察和產品建議
4. 撰寫高品質的產品需求文件

## 教學內容規劃

### 7.1 案例專案介紹：Cloudy Homework (15分鐘)

#### 7.1.1 專案背景設定
**角色扮演情境：**
- 學員角色：「Cloudy」產品線新任PM
- 任務：徹底理解「Cloudy Homework」PoC專案
- 目標：規劃2.0版本的產品策略

**專案概述：**
- Maven多模組架構
- 雲端服務整合應用
- 四大核心模組：安全、帳戶、檔案、事件

#### 7.1.2 專案技術結構
**模組架構：**
```
Cloudy Homework/
├── cloudy-security/    # 安全模組
├── cloudy-account/     # 帳戶模組  
├── cloudy-files/       # 檔案模組
└── cloudy-event/       # 事件模組
```

**技術棧：**
- 後端：Java + Spring Boot
- 資料庫：PostgreSQL
- 雲端：Google Cloud Storage
- 認證：JWT Token

### 7.2 流程一：鳥瞰全貌 (30分鐘)

#### 7.2.1 宏觀理解策略
**分析目標：**
- 快速建立專案整體認知
- 理解核心功能與架構
- 識別關鍵模組職責

**推薦使用模式：** Ask模式（安全探索）

#### 7.2.2 實戰指令演練

**指令1：整體專案理解**
```
實戰指令：
"這是一個 Maven 多模組專案。請用產品經理能理解的語言，
總結這個 'Cloudy Homework' 專案的整體用途和主要功能。"

期望產出：
- 專案的商業目的
- 主要功能列表
- 目標用戶群體
- 核心價值主張
```

**指令2：模組架構分析**
```
實戰指令：
"請分析根目錄的 #pom.xml 檔案，解釋 #cloudy-security, 
#cloudy-account, #cloudy-files, #cloudy-event 這四個模組
各自扮演的角色，以及它們之間的依賴關係。"

期望產出：
- 模組功能職責
- 依賴關係圖
- 架構設計理念
- 潛在風險點
```

#### 7.2.3 鳥瞰階段成功標準
**完成指標：**
- [ ] 理解專案整體目的
- [ ] 掌握四大模組職責
- [ ] 識別核心業務流程
- [ ] 建立架構心智模型

### 7.3 流程二：循線追查 (40分鐘)

#### 7.3.1 深度追蹤策略
**分析重點：**
- 選擇核心功能進行深度分析
- 追蹤完整的業務流程
- 理解資料流和控制流

**推薦模式：** Ask模式或Agent模式

#### 7.3.2 用戶認證流程追蹤

**追蹤1：用戶註冊流程**
```
實戰指令：
"我想了解新使用者註冊的完整流程。從使用者在 @cloudy-account/ 
模組中發送 /register API 請求開始，到資料最終寫入 PostgreSQL 
資料庫，請追蹤並解釋這個過程中相關的程式碼呼叫鏈。"

分析重點：
- API端點定義
- 資料驗證邏輯
- 資料庫操作
- 錯誤處理機制
```

**追蹤2：登入安全機制**
```
實戰指令：
"當使用者透過 /login 登入成功後，JWT Token 是如何生成的？
請分析 #JwtTokenUtil 的作用，以及 #JwtUserDetailsService 
是如何從資料庫加載使用者資訊的。"

分析重點：
- Token生成策略
- 用戶資訊載入
- 安全性考量
- 會話管理
```

#### 7.3.3 循線追查成功標準
**完成指標：**
- [ ] 完整追蹤認證流程
- [ ] 理解安全機制設計
- [ ] 識別關鍵安全控制點
- [ ] 發現潛在改進點

### 7.4 流程三：鑽研細節 (35分鐘)

#### 7.4.1 精準分析策略
**分析特點：**
- 針對特定商業規則深挖
- 使用#符號精準定位
- 關注邊界情況處理

**推薦模式：** Ask模式 + #符號精準引用

#### 7.4.2 事件驅動功能深度分析

**深度分析指令：**
```
實戰指令：
"這個系統有一個事件驅動功能。當一個新圖片上傳到 Cloud Storage 後，
@cloudy-event/ 模組是如何被觸發，並自動對圖片進行壓縮的？
請解釋 #StorageFunction 和 #CompressImageService 之間的協作關係。"

深挖要點：
- 觸發機制原理
- 事件處理流程
- 服務間通訊
- 錯誤恢復策略
```

#### 7.4.3 商業規則挖掘
**關鍵問題：**
1. 為什麼選擇事件驅動架構？
2. 圖片壓縮的商業價值是什麼？
3. 處理失敗時的用戶體驗如何？
4. 這個設計如何支持擴展性？

#### 7.4.4 鑽研細節成功標準
**完成指標：**
- [ ] 理解事件驅動機制
- [ ] 掌握核心商業邏輯
- [ ] 識別技術創新點
- [ ] 發現優化機會

### 7.5 流程四：綜合與產出 (40分鐘)

#### 7.5.1 文件化策略
**產出目標：**
- 將分析結果轉化為結構化文件
- 撰寫產品需求文件
- 提供可執行的建議

**推薦模式：** Agent模式（創意產出）

#### 7.5.2 PRD撰寫實戰

**PRD撰寫指令：**
```
實戰指令：
"請為我撰寫一份產品需求文件 (PRD) 的新功能章節，
功能名稱為「事件驅動的自動圖片壓縮」。內容需包含：

1. 使用者故事 (User Story)
2. 觸發條件
3. 後端處理流程 (需包含成功和失敗的場景)
4. 驗收標準 (Acceptance Criteria)

請用產品經理的語言撰寫，避免過多技術術語。"
```

#### 7.5.3 PRD品質標準
**評估要點：**
- 使用者故事是否清晰
- 觸發條件是否完整
- 流程描述是否準確
- 驗收標準是否可測試

#### 7.5.4 綜合產出成功標準
**完成指標：**
- [ ] PRD文件結構完整
- [ ] 內容準確反映技術實現
- [ ] 語言適合非技術讀者
- [ ] 包含可執行的建議

### 7.6 四階段流程整合與最佳實踐 (20分鐘)

#### 7.6.1 流程整合圖
```
鳥瞰全貌 → 循線追查 → 鑽研細節 → 綜合產出
    ↓           ↓           ↓           ↓
  整體理解     深度分析     精準洞察     文件產出
  Ask模式     Ask/Agent    Ask+#       Agent模式
  30-45分鐘   45-60分鐘    30-45分鐘   30-45分鐘
```

#### 7.6.2 各階段關鍵成功要素

**階段1成功要素：**
- 保持高層次視角
- 避免過早深入細節
- 建立清晰的心智模型

**階段2成功要素：**
- 選擇核心流程追蹤
- 保持商業視角
- 記錄關鍵發現

**階段3成功要素：**
- 精準使用#符號
- 深挖商業邏輯
- 關注邊界情況

**階段4成功要素：**
- 結構化文件產出
- 使用適當語言
- 提供可行建議

## 實作練習

### 練習1：完整四階段分析實戰 (90分鐘)
**目標：** 完整體驗黃金分析流程
**活動：** 
1. 按照四階段流程分析Cloudy Homework專案
2. 每階段限時完成，模擬真實工作壓力
3. 記錄每階段的關鍵發現

**時間分配：**
- 鳥瞰全貌：20分鐘
- 循線追查：25分鐘
- 鑽研細節：20分鐘
- 綜合產出：25分鐘

### 練習2：不同功能模組分析挑戰 (45分鐘)
**目標：** 應用相同流程分析不同模組
**活動：** 
1. 選擇cloudy-files模組進行分析
2. 重複四階段流程
3. 比較不同模組的分析差異

### 練習3：PRD撰寫專項訓練 (30分鐘)
**目標：** 強化文件產出能力
**活動：** 
1. 為檔案上傳功能撰寫PRD
2. 同儕互評PRD品質
3. 優化文件結構和內容

## 案例分析檢核表

### 鳥瞰全貌檢核
- [ ] 專案目的理解正確
- [ ] 模組職責劃分清晰
- [ ] 架構依賴關係明確
- [ ] 核心價值主張識別

### 循線追查檢核
- [ ] 流程追蹤完整
- [ ] 關鍵控制點識別
- [ ] 商業邏輯理解準確
- [ ] 潛在風險點發現

### 鑽研細節檢核
- [ ] 精準使用符號引用
- [ ] 深度分析商業規則
- [ ] 邊界情況考慮周全
- [ ] 創新點發現

### 綜合產出檢核
- [ ] PRD結構完整
- [ ] 內容準確性高
- [ ] 語言適合目標讀者
- [ ] 建議具可執行性

## 常見問題與解決方案

### 問題1：分析過程中迷失方向
**解決方案：**
- 經常回顧當前階段目標
- 使用檢核表確認進度
- 適時向AI請求指引

### 問題2：技術細節理解困難
**解決方案：**
- 要求AI用商業語言解釋
- 關注功能目的而非實現方式
- 建立技術-商業映射表

### 問題3：PRD撰寫缺乏結構
**解決方案：**
- 使用標準PRD模板
- 參考優秀PRD範例
- 請AI檢查文件完整性

## 評估方式
- **流程完整性：** 是否完整執行四階段流程
- **分析深度：** 每階段分析的深度和品質
- **洞察價值：** 發現的商業洞察是否有價值
- **文件品質：** PRD撰寫的專業程度和實用性

## 課後作業
1. 選擇一個開源專案，完整執行四階段分析流程
2. 撰寫該專案的核心功能PRD
3. 建立個人的分析流程檢核表
4. 記錄分析過程中的最佳實踐和經驗教訓

## 時間分配
- 案例介紹：15分鐘
- 四階段流程講解：125分鐘
- 實作練習：165分鐘
- 討論與總結：15分鐘
- **總計：320分鐘（建議分為兩堂課）**

## 教學資源
- Cloudy Homework專案檔案
- PRD撰寫模板
- 分析流程檢核表
- 最佳實踐案例庫

## 成功指標
學員能夠：
1. 熟練執行四階段黃金分析流程
2. 從程式碼中提煉有價值的商業洞察
3. 撰寫高品質的產品需求文件
4. 建立系統性的逆向工程分析方法
5. 將技術實現轉化為產品策略建議 